<!DOCTYPE html>
<html>
<head>
    <title>Jefferson Suh</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
</head>
<body>
    <div class="content">
        <div class="nav-container">
            <div class="name">
                <a href="index.html">Jefferson Suh</a>
            </div>
            <div class="nav-links">
                <a href="about.html">about</a>
                <a href="writing.html">writing</a>
                <a href="contact.html">contact</a>
            </div>
        </div>
        <div class="side-by-side">
            <div class="redbow-images">
                <img src="images/redbow_transp.png" alt="redbo" class="static-image">
                <img src="images/redbow_transp.png" alt="redbow" class="draggable free-drag">
                <img src="images/redbow_transp.png" alt="redbow" class="draggable free-drag">
                <img src="images/redbow_transp.png" alt="redbow" class="draggable free-drag">
                <img src="images/redbow_transp.png" alt="redbow" class="draggable free-drag">
                <img src="images/redbow_transp.png" alt="redbow" class="draggable free-drag">
                <img src="images/redbow_transp.png" alt="redbow" class="draggable free-drag">
            </div>
            <div class="korean-text">
                <p class="draggable free-drag">하이 하이</p>
            </div>
        </div>
        <div class="center-image">
            <img src="images/applealien_basnet.png" alt="applealien" class="draggable free-drag">
        </div>
        <div class="smile-image">
            <img src="images/smile_transp.png" alt="smile1" class="draggable free-drag">
        </div>
        <div class="time-location">
            <div id="location">loading location...</div>
            <div id="date"></div>
            <div id="clock">local time <span id="time">15:49:01</span></div>
        </div>
        <div class="text-content">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
        <div class="audio-player draggable free-drag">
            <audio controls preload="auto">
                <source src="audio/Look over the edge, but not too far.mp3" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
        </div>
        <div class="gradient-image">
            <img src="images/grayscale_spotify_ready.jpg" alt="gradient" class="draggable free-drag">
        </div>
        <div class="image-series">
            <img src="images/xray-square.jpg" alt="xray" class="series-image">
            <img src="images/joy.jpg" alt="joy" class="series-image">
            <img src="images/puso.JPG" alt="puso" class="series-image">
            <img src="images/poser_akcomp.png" alt="poser" class="series-image">
            <img src="images/kairo_sun.png" alt="kairo" class="series-image">
            <img src="images/3, giancarla artwork v2.png" alt="giancarla" class="series-image">
            <img src="images/IMG_7232.JPG" alt="hand" class="series-image">
            <img src="images/bjork_square.JPG" alt="bjork" class="series-image">
        </div>
    </div>


    <script>
        // Regular draggable elements (restricted to parent)
        interact('.draggable:not(.free-drag)')
            .draggable({
                inertia: true,
                modifiers: [
                    interact.modifiers.restrictRect({
                        restriction: 'parent',
                        endOnly: true
                    })
                ],
                autoScroll: true,
                listeners: {
                    move: dragMoveListener,
                }
            });

        // Free-draggable elements (can move anywhere)
        interact('.free-drag')
            .draggable({
                inertia: true,
                autoScroll: false,
                listeners: {
                    move: dragMoveListener,
                }
            });

        function dragMoveListener(event) {
            const target = event.target;
            const x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;
            const y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

            target.style.transform = `translate(${x}px, ${y}px)`;
            target.setAttribute('data-x', x);
            target.setAttribute('data-y', y);
        }

        // Update clock
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { 
                hour12: true,
                hour: 'numeric',
                minute: '2-digit',
                second: '2-digit'
            });
            const weekday = now.toLocaleDateString('en-US', { weekday: 'long' });
            const monthDay = now.toLocaleDateString('en-US', { month: 'long', day: 'numeric' });
            const year = now.toLocaleDateString('en-US', { year: 'numeric' });
            const dateString = `${weekday} ${monthDay} ${year}`;
            document.getElementById('time').textContent = timeString;
            document.getElementById('date').textContent = dateString;
        }

        // Update clock every second
        setInterval(updateClock, 1000);
        updateClock(); // Initial call

        // Get LOCATION
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    // Success callback
                    function(position) {
                        const latitude = position.coords.latitude;
                        const longitude = position.coords.longitude;
                        
                        // Log raw position data
                        console.log('Raw position data:', position);
                        // Use a more reliable geocoding service
                        fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${latitude}&longitude=${longitude}&localityLanguage=en`)
                            .then(response => response.json())
                            .then(data => {
                                // Log raw geocoding data
                                console.log('Raw geocoding data:', data);
                                
                                const city = data.city || data.locality || '';
                                const state = data.principalSubdivision || '';
                                const country = data.countryCode || '';
                                document.getElementById('location').textContent = `${city}, ${state}, ${country}`;
                            })
                            .catch(error => {
                                console.error('Geocoding error:', error);
                                document.getElementById('location').textContent = 'Geocoding failed: ' + error.message;
                            });
                    },
                    // Error callback
                    function(error) {
                        console.error('geolocation error:', error);
                        let errorMessage;
                        switch(error.code) {
                            case error.PERMISSION_DENIED:
                                errorMessage = 'location permission denied';
                                break;
                            case error.POSITION_UNAVAILABLE:
                                errorMessage = 'location information unavailable';
                                break;
                            case error.TIMEOUT:
                                errorMessage = 'location request timed out';
                                break;
                            default:
                                errorMessage = 'unknown error';
                                break;
                        }
                        document.getElementById('location').textContent = errorMessage;
                    },
                    // Options
                    {
                        enableHighAccuracy: true,
                        timeout: 5000,
                        maximumAge: 0
                    }
                );
            }
        }
        // Get location when page loads
        getLocation();
    </script>
    <footer>
        &copy; 2024 Jefferson Suh / Los Angeles
    </footer>
</body>
</html> 